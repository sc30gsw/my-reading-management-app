# ランディングページテスト仕様書

## 概要

読書管理アプリケーションのランディングページに対する包括的なテスト戦略とTDD実装指針。Next.js 15 + React 19のRSCアーキテクチャに対応した高品質なテスト仕様を提供する。

## テストフレームワーク設定

- **ユニットテストフレームワーク**: Vitest 3.2.4
- **UIテストライブラリ**: Testing Library React 16.3.0
- **E2Eフレームワーク**: Playwright 1.54.2
- **APIテストライブラリ**: 模擬データのため不要
- **カバレッジ目標**: 85%

## 要件トレーサビリティマトリクス

| 要件ID | テストタイプ | テストケースID | カバレッジ状況 |
|--------|-------------|---------------|---------------|
| REQ-1.1 | Component | TC-C-001 | ✅ 計画済み |
| REQ-1.2 | Component | TC-C-002 | ✅ 計画済み |
| REQ-1.3 | Component | TC-C-003 | ✅ 計画済み |
| REQ-1.4 | E2E | TC-E-001 | ✅ 計画済み |
| REQ-2.1 | Component | TC-C-004 | ✅ 計画済み |
| REQ-2.2 | Component | TC-C-005 | ✅ 計画済み |
| REQ-2.3 | Component | TC-C-006 | ✅ 計画済み |
| REQ-2.4 | Component | TC-C-007 | ✅ 計画済み |
| REQ-3.1 | Component | TC-C-008 | ✅ 計画済み |
| REQ-3.2 | Component | TC-C-009 | ✅ 計画済み |
| REQ-4.1 | Component | TC-C-010 | ✅ 計画済み |
| REQ-4.2 | Component | TC-C-011 | ✅ 計画済み |
| REQ-4.3 | Hook | TC-H-001 | ✅ 計画済み |
| REQ-5.1 | Component | TC-C-012 | ✅ 計画済み |
| REQ-6.1 | Component | TC-C-013 | ✅ 計画済み |
| REQ-6.2 | Hook | TC-H-002 | ✅ 計画済み |
| REQ-7.1 | Component | TC-C-014 | ✅ 計画済み |
| REQ-7.2 | Hook | TC-H-003 | ✅ 計画済み |
| REQ-8.1-8.4 | Component | TC-C-015 | ✅ 計画済み |
| REQ-9.1 | E2E | TC-E-002 | ✅ 計画済み |
| REQ-9.2 | Component | TC-C-016 | ✅ 計画済み |
| REQ-9.3-9.4 | E2E | TC-E-003 | ✅ 計画済み |

## テスト戦略

### ユニットテスト戦略
- **スコープ**: ユーティリティ関数、データ変換、純粋関数
- **アプローチ**: テストファーストDevelopment（Red-Green-Refactor）
- **分離**: 外部依存関係をすべてモック
- **カバレッジ目標**: ≥85% 行カバレッジ

### コンポーネントテスト戦略
- **スコープ**: Reactコンポーネント、UI動作、ユーザーインタラクション
- **アプローチ**: 行動駆動テスト
- **レンダリング**: Testing Libraryのrender メソッド使用
- **ユーザーイベント**: 実際のユーザーインタラクションをシミュレート

### カスタムフックテスト戦略
- **スコープ**: カスタムReactフック
- **アプローチ**: renderHookとactを使用した状態変更テスト
- **分離**: コンポーネントから独立してフックをテスト
- **カバレッジ**: すべてのフックパスとエッジケース

### E2Eテスト戦略
- **スコープ**: 完全なユーザーワークフロー
- **アプローチ**: ユーザージャーニーテスト
- **環境**: 本番環境相当でのテスト
- **データ管理**: 模擬データによるテスト

## テスト実行計画

### フェーズ1: 基盤テスト（TDD Redフェーズ）
1. コアコンポーネントの失敗ユニットテストを記述
2. ユーザーインタラクションの失敗テストを記述
3. UI要素の失敗コンポーネントテストを記述

### フェーズ2: 実装（TDD Greenフェーズ）
1. ユニットテストをパスする最小限のコードを実装
2. コンポーネントテストをパスするUIを実装
3. インタラクションテストをパスする機能を実装

### フェーズ3: 統合テスト（TDD Refactorフェーズ）
1. コンポーネント間の統合テストを記述
2. テストグリーンを保ちながらコードをリファクタリング
3. パフォーマンステストを追加

### フェーズ4: E2Eテスト
1. 重要なユーザーパスのE2Eテストを記述
2. エッジケースのE2Eテストを記述
3. パフォーマンス・ロードテスト

## モック戦略

### データモック
- ユーザーデータフィクスチャ
- 統計データモック
- レビューデータモック

### サービスモック
- アニメーションライブラリモック
- ブラウザAPIモック
- 時間関連関数モック

## CI/CD統合

### テストパイプライン
```yaml
test:
  - lint
  - unit-tests
  - component-tests
  - e2e-tests
  - coverage-report
```

### カバレッジゲート
- 最小カバレッジ: 85%
- カバレッジ低下時にビルド失敗
- カバレッジトレンドレポート

## TDD実装ワークフロー

### Redフェーズ: 失敗テスト記述
基盤となる失敗テストをspec通りに記述

### Greenフェーズ: 最小実装
テストをパスする最小限のコードを記述

### Refactorフェーズ: 品質向上
テストグリーンを保ちながらコード品質を向上

## 品質保証メトリクス

- **ユニットテスト**: ≥85% コードカバレッジ
- **統合テスト**: 全主要コンポーネント間結合
- **E2Eテスト**: 主要変換ファネル
- **パフォーマンステスト**: Core Web Vitals監視